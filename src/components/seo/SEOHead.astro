---
import { seoConfig, generateTitle, generateCanonicalUrl } from '@/config/seo';
import OpenGraph from './OpenGraph.astro';
import TwitterCard from './TwitterCard.astro';
import StructuredData from './StructuredData.astro';

interface Props {
  title?: string;
  description?: string;
  image?: string;
  type?: string;
}

const { title, description, image, type } = Astro.props;

const pageTitle = generateTitle(title);
const pageDescription = description || seoConfig.defaultDescription;
const pageImage = image || seoConfig.defaultImage;
const canonicalUrl = generateCanonicalUrl(Astro.url.pathname);
---

<!-- Basic Meta Tags -->
<meta name="description" content={pageDescription} />
<meta name="keywords" content={seoConfig.keywords.join(', ')} />
<meta name="author" content={seoConfig.author} />
<link rel="canonical" href={canonicalUrl} />

<!-- Open Graph -->
<OpenGraph
  title={pageTitle}
  description={pageDescription}
  image={pageImage}
  url={canonicalUrl}
  type={type}
/>

<!-- Twitter Card -->
<TwitterCard
  title={pageTitle}
  description={pageDescription}
  image={seoConfig.twitterImage}
/>

<!-- Structured Data -->
<StructuredData />
