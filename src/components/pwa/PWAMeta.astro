---
import { pwaConfig } from "@/config/pwa";
---

<!-- PWA Meta Tags -->
<link
    rel="manifest"
    href={`${import.meta.env.BASE_URL}${pwaConfig.manifestPath}`}
/>
<meta name="theme-color" content={pwaConfig.themeColor} />
<link
    rel="apple-touch-icon"
    href={`${import.meta.env.BASE_URL}${pwaConfig.icons.appleTouchIcon}`}
/>

<!-- iOS-Specific Meta Tags -->
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta
    name="apple-mobile-web-app-status-bar-style"
    content="black-translucent"
/>
<meta name="apple-mobile-web-app-title" content={pwaConfig.shortName} />

<!-- Favicon -->
<link
    rel="icon"
    type="image/svg+xml"
    href={`${import.meta.env.BASE_URL}${pwaConfig.icons.favicon}`}
/>

<!-- Service Worker Registration -->
<script
    define:vars={{
        base: import.meta.env.BASE_URL,
        swPath: pwaConfig.serviceWorker.path,
    }}
>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker
                .register(base + swPath)
                .then((registration) => {
                    console.log("SW Registered:", registration);
                })
                .catch((error) => {
                    console.log("SW Registration Failed:", error);
                });
        });
    }
</script>
