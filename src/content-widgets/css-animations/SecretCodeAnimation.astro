<div class="secret-code-wrapper">
    <section>
        <p>Glide To Reveal Secret Code</p>
        <ul class="code">
            <li tabindex="0" class="digit">
                <span>0</span>
            </li>
            <li tabindex="0" class="digit">
                <span>3</span>
            </li>
            <li tabindex="0" class="digit">
                <span>4</span>
            </li>
            <li tabindex="0" class="digit">
                <span>8</span>
            </li>
            <li tabindex="0" class="digit">
                <span>7</span>
            </li>
            <li tabindex="0" class="digit">
                <span>2</span>
            </li>
        </ul>
    </section>
</div>

<style>
    /* Scoped styles */
    .secret-code-wrapper {
        /* Mimic the body styles from original snippet but containerized */
        min-height: 400px; /* Reduced specific height */
        display: grid;
        place-items: center;
        font-family:
            "SF Pro Text", "SF Pro Icons", "AOS Icons", "Helvetica Neue",
            Helvetica, Arial, sans-serif, system-ui;
        background: hsl(0 0% 0%);
        gap: 2rem;
        position: relative;
        overflow: hidden;
        border-radius: 8px;
        padding: 2rem;
    }

    .secret-code-wrapper::before {
        --line: hsl(0 0% 95% / 0.25);
        content: "";
        height: 100%;
        width: 100%;
        position: absolute;
        background:
            linear-gradient(90deg, var(--line) 1px, transparent 1px 10vmin)
                0 -5vmin / 10vmin 10vmin,
            linear-gradient(var(--line) 1px, transparent 1px 10vmin) 0 -5vmin /
                10vmin 10vmin;
        mask: linear-gradient(-15deg, transparent 30%, white);
        top: 0;
        left: 0;
        z-index: 0;
        pointer-events: none;
    }

    /* Reset box-sizing for this component if needed, though Astro usually scopes well */
    .secret-code-wrapper * {
        box-sizing: border-box;
    }

    section {
        display: grid;
        gap: 4rem;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 1;
    }

    section p {
        margin: 0;
        font-size: 2.25rem;
        color: hsl(0 0% 40%);
        text-align: center;
        background: linear-gradient(hsl(0 0% 80%), hsl(0 0% 50%));
        color: transparent;
        -webkit-background-clip: text;
        background-clip: text;
    }

    .code {
        font-size: 3rem;
        display: flex;
        flex-wrap: nowrap;
        color: hsl(0 0% 100%);
        border-radius: 1rem;
        background: hsl(0 0% 6%);
        justify-content: center;
        box-shadow: 0 1px hsl(0 0% 100% / 0.25) inset;
        list-style: none; /* Reset list style */
    }

    .code:hover {
        cursor: grab;
    }

    .digit {
        display: flex;
        height: 100%;
        padding: 5.5rem 1rem;
    }

    .digit:focus-visible {
        outline-color: hsl(0 0% 50% / 0.25);
        outline-offset: 1rem;
    }

    .digit span {
        scale: calc(var(--active, 0) + 0.5);
        filter: blur(calc((1 - var(--active, 0)) * 1rem));
        transition:
            scale calc(((1 - var(--active, 0)) + 0.2) * 1s),
            filter calc(((1 - var(--active, 0)) + 0.2) * 1s);
    }

    .digit:first-of-type {
        padding-left: 5rem;
    }
    .digit:last-of-type {
        padding-right: 5rem;
    }

    /* 
     Using :root vars in scoped style might leak if not careful, 
     but in Astro <style> they are scoped to the class usually if mapped.
     However, custom properties are inherited. 
     We define them on the wrapper to keep them local-ish.
  */
    .secret-code-wrapper {
        --lerp-0: 1; /* === sin(90deg) */
        --lerp-1: calc(sin(50deg));
        --lerp-2: calc(sin(45deg));
        --lerp-3: calc(sin(35deg));
        --lerp-4: calc(sin(25deg));
        --lerp-5: calc(sin(15deg));
    }

    /* 
    The original CSS used :root for these lerp values. 
    It also used complex :has() and sibling selectors.
    These need to be preserved.
  */

    .digit:is(:hover, :focus-visible) {
        --active: var(--lerp-0);
    }
    .digit:is(:hover, :focus-visible) + .digit,
    .digit:has(+ .digit:is(:hover, :focus-visible)) {
        --active: var(--lerp-1);
    }
    .digit:is(:hover, :focus-visible) + .digit + .digit,
    .digit:has(+ .digit + .digit:is(:hover, :focus-visible)) {
        --active: var(--lerp-2);
    }
    .digit:is(:hover, :focus-visible) + .digit + .digit + .digit,
    .digit:has(+ .digit + .digit + .digit:is(:hover, :focus-visible)) {
        --active: var(--lerp-3);
    }
    .digit:is(:hover, :focus-visible) + .digit + .digit + .digit + .digit,
    .digit:has(+ .digit + .digit + .digit + .digit:is(:hover, :focus-visible)) {
        --active: var(--lerp-4);
    }
    .digit:is(:hover, :focus-visible)
        + .digit
        + .digit
        + .digit
        + .digit
        + .digit,
    .digit:has(
        + .digit + .digit + .digit + .digit + .digit:is(:hover, :focus-visible)
    ) {
        --active: var(--lerp-5);
    }

    /* Fallback for browsers not supporting sin() - assuming 1 as max
     sin(90) = 1
     sin(50) = 0.766
     sin(45) = 0.707
     sin(35) = 0.573
     sin(25) = 0.422
     sin(15) = 0.258
  */
    @supports not (margin: calc(sin(90deg))) {
        .secret-code-wrapper {
            --lerp-0: 1;
            --lerp-1: 0.766;
            --lerp-2: 0.707;
            --lerp-3: 0.573;
            --lerp-4: 0.422;
            --lerp-5: 0.258;
        }
    }

    /* Mobile responsiveness */
    @media (max-width: 600px) {
        .code {
            font-size: 1.5rem;
        }
        .digit {
            padding: 3rem 0.5rem;
        }
        .digit:first-of-type {
            padding-left: 2rem;
        }
        .digit:last-of-type {
            padding-right: 2rem;
        }
    }
</style>
